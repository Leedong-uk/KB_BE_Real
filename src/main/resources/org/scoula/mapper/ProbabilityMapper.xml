<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="org.scoula.mapper.ProbabilityMapper">

    <!-- ScoreRecord 조회 -->
    <select id="selectScoreRecords" resultType="org.scoula.service.ProbabilityService.ScoreRecord">
        SELECT
            min_score AS minScore,
            avg_score AS avgScore,
            max_score AS maxScore,
            supply_count AS supplyCount,
            resident_code AS residentCode
        FROM
            subscription_history
        WHERE
            sido = #{sido}
          AND sigungu = #{sigungu}
          AND resident_code = #{residentCode}
    </select>

    <!-- apt_idx로 아파트 정보 조회 -->
    <select id="selectAptInfo" resultType="org.scoula.service.ProbabilityService.AptInfo">
        SELECT
            sido,
            sigungu,
            resident_code AS residentCode,
            supply_count AS supplyCount
        FROM
            apt_table
        WHERE
            apt_idx = #{aptIdx}
    </select>

</mapper>
